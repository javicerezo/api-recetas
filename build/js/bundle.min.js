const resultadosContenedor=document.querySelector(".js-resultados__contenedor"),modalContenedor=document.querySelector(".js-modal"),contenedorMensaje=document.querySelector(".js-mensaje__contenedor"),selectCategorias=document.querySelector("#categorias"),subnav=document.querySelector(".js-nav__subnav");document.addEventListener("DOMContentLoaded",()=>{try{iniciarApp()}catch(t){console.log(t)}}),selectCategorias.addEventListener("change",seleccionarCategoria),resultadosContenedor.addEventListener("click",t=>{if(t.target.classList.contains("js-boton")){seleccionarReceta(t.target.getAttribute("id"),modalContenedor)}}),modalContenedor.addEventListener("click",t=>{if((t.target.classList.contains("fa-xmark")||t.target.classList.contains("c-modal__screen"))&&limpiarHTML(modalContenedor),t.target.classList.contains("js-boton")){const e={id:document.querySelector(".c-modal__boton").getAttribute("data-id"),titulo:document.querySelector(".c-modal__h2").textContent,imagen:document.querySelector(".js-modal__img").getAttribute("src")};existeFavoritos(e.id)?(eliminarFavoritos(e.id),imprimirAlerta(contenedorMensaje,"error","Eliminado correctamente"),t.target.textContent="Agregar Favoritos"):(agregarFavoritos(e),imprimirAlerta(contenedorMensaje,"exito","Agregado correctamente"),t.target.textContent="Eliminar Favoritos")}});const favoritosContenedor=document.querySelector(".js-favoritos__contenedor"),modalContenedorFavoritos=document.querySelector(".js-modal"),contenedorMensajeFavoritos=document.querySelector(".js-mensaje__contenedor"),listadoFavoritos=JSON.parse(localStorage.getItem("listadoFavoritos"))||[];function iniciarApp(){obtenerCategorias()}function obtenerCategorias(){fetch("https://www.themealdb.com/api/json/v1/1/categories.php").then(t=>t.json()).then(t=>mostrarCategorias(t.categories))}function mostrarCategorias(t=[]){t.forEach(t=>{const{strCategory:e}=t,o=document.createElement("OPTION");o.value=e,o.textContent=e,selectCategorias.appendChild(o)})}function seleccionarCategoria(t){const e=t.target.value;fetch("https://www.themealdb.com/api/json/v1/1/filter.php?c="+e).then(t=>t.json()).then(t=>mostrarRecetas(t.meals))}function mostrarRecetas(t=[]){limpiarHTML(resultadosContenedor);const e=document.createElement("H2");e.textContent=t.length?"Resultados":"No hay resultados",e.classList.add("c-resultados__h2");const o=document.createElement("UL");o.classList.add("c-resultados__ul"),resultadosContenedor.appendChild(e),resultadosContenedor.appendChild(o),t.forEach(t=>{const{strMeal:e,strMealThumb:a,idMeal:n}=t,s=document.createElement("LI");s.classList.add("c-resultados__li"),s.innerHTML=`\n            <div class="c-resultados__li-imagen">\n                <img src=${a} alt="imagen receta ${a}">\n            </div>\n            <div class="c-resultados__li-contenido">\n                <h3 class="c-resultados__titulo">${e}</h3>\n                <button class="c-resultados__boton c-boton js-boton" id=${n}>Ver receta</button>\n            </div>\n        `,o.appendChild(s)})}function seleccionarReceta(t,e){fetch("https://themealdb.com/api/json/v1/1/lookup.php?i="+t).then(t=>t.json()).then(t=>mostrarRecetaModal(t.meals[0],e))}function mostrarRecetaModal(t,e){const{idMeal:o,strInstructions:a,strMeal:n,strMealThumb:s}=t,r=document.createElement("DIV");r.classList.add("c-modal__screen"),r.innerHTML=`\n        <div class='c-modal__contenedor'>\n            <h2 class='c-modal__h2'>${n}</h2>\n            <div class='c-modal__contenedor-contenido'>\n                <div class='c-modal__img'>\n                    <img class='js-modal__img' src='${s}' alt='imagen producto'>\n                </div>\n                <h3 class='c-modal__h3'>Instrucciones</h3>\n                <p class='c-modal__p'>${a}</p>\n                <h3 class='c-modal__h3'>Ingredientes y cantidades</h3>\n                <ul class='c-modal__ul js-modal__ul'>\n\n                </ul>\n            </div>\n            <button class='c-modal__boton c-boton js-boton' data-id=${o}>Guardar Favoritos</button>\n            <div class='c-modal__close'>\n                <i class='fa-solid fa-xmark'></i>\n            </div> \n        </div>\n    `,e.appendChild(r),e.classList.add("c-modal--mod");const i=document.querySelector(".js-modal__ul");for(let e=1;e<=20;e++)if(t["strIngredient"+e]){const o=t["strIngredient"+e],a=t["strMeasure"+e],n=document.createElement("LI");n.classList.add("c-modal__li"),n.textContent=`${o} - ${a}`,i.appendChild(n)}existeFavoritos(o)&&(document.querySelector(".c-modal__boton").textContent="Eliminar Favoritos")}function limpiarHTML(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function imprimirAlerta(t,e,o){if(t.classList.add("c-mensaje__contenedor--mod"),0===t.children[1].childElementCount){const a=document.createElement("P");a.classList.add("c-mensaje__p-creada","u-mensaje"),a.textContent=o,"exito"===e&&a.classList.add("u-mensaje--"+e),"error"===e&&a.classList.add("u-mensaje--"+e),"alerta"===e&&a.classList.add("u-mensaje--"+e),t.children[1].appendChild(a),setTimeout(e=>{t.classList.remove("c-mensaje__contenedor--mod")},4e3),setTimeout(e=>{limpiarHTML(t.children[1])},5e3)}}function agregarFavoritos(t){const e=JSON.parse(localStorage.getItem("listadoFavoritos"))||[];localStorage.setItem("listadoFavoritos",JSON.stringify([...e,t]))}function eliminarFavoritos(t){const e=(JSON.parse(localStorage.getItem("listadoFavoritos"))||[]).filter(e=>e.id!==t);localStorage.setItem("listadoFavoritos",JSON.stringify(e))}function existeFavoritos(t){return(JSON.parse(localStorage.getItem("listadoFavoritos"))||[]).some(e=>e.id===t)}function cargarFavoritos(t=[]){if(0==t.length){const t=document.createElement("H5");t.classList.add("c-favoritos__h5"),t.textContent="¡Aún no has añadido nada a favoritos!",favoritosContenedor.appendChild(t)}else{const e=document.createElement("UL");e.classList.add("c-favoritos__ul"),favoritosContenedor.appendChild(e),t.forEach(t=>{const{titulo:o,imagen:a,id:n}=t,s=document.createElement("LI");s.classList.add("c-favoritos__li"),s.innerHTML=`\n                <div class="c-favoritos__li-imagen">\n                    <img src=${a} alt="imagen receta ${a}">\n                </div>\n                <div class="c-favoritos__li-contenido">\n                    <h3 class="c-favoritos__titulo">${o}</h3>\n                    <button class="c-favoritos__boton c-boton js-boton" id=${n}>Ver receta</button>\n                </div>\n            `,e.appendChild(s)})}}document.addEventListener("DOMContentLoaded",()=>{try{cargarFavoritos(JSON.parse(localStorage.getItem("listadoFavoritos"))||[])}catch(t){console.log(t)}}),favoritosContenedor.addEventListener("click",t=>{if(t.target.classList.contains("js-boton")){seleccionarReceta(t.target.getAttribute("id"),modalContenedorFavoritos)}}),modalContenedorFavoritos.addEventListener("click",t=>{if(t.target.classList.contains("fa-xmark")||t.target.classList.contains("c-modal__screen")){limpiarHTML(modalContenedorFavoritos),limpiarHTML(favoritosContenedor);cargarFavoritos(JSON.parse(localStorage.getItem("listadoFavoritos"))||[])}if(t.target.classList.contains("js-boton")){const e={id:document.querySelector(".c-modal__boton").getAttribute("data-id"),titulo:document.querySelector(".c-modal__h2").textContent,imagen:document.querySelector(".js-modal__img").getAttribute("src")};existeFavoritos(e.id)?(eliminarFavoritos(e.id),imprimirAlerta(contenedorMensajeFavoritos,"error","Has eliminado la receta de favoritos"),t.target.textContent="Agregar Favoritos"):(agregarFavoritos(e),imprimirAlerta(contenedorMensajeFavoritos,"exito","Has agregado la receta a favoritos"),t.target.textContent="Eliminar Favoritos")}});
//# sourceMappingURL=bundle.js.map
