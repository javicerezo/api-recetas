{"version":3,"sources":["app.js","favoritos.js","funciones.js"],"names":["resultadosContenedor","document","querySelector","modalContenedor","contenedorMensaje","selectCategorias","subnav","addEventListener","seleccionarCategoria","e","target","classList","contains","seleccionarReceta","getAttribute","limpiarHTML","receta","id","titulo","textContent","imagen","existeFavoritos","eliminarFavoritos","imprimirAlerta","agregarFavoritos","iniciarApp","favoritosContenedor","modalContenedorFavoritos","contenedorMensajeFavoritos","obtenerCategorias","fetch","then","respuesta","json","resultado","mostrarCategorias","categories","categorias","forEach","categoria","strCategory","option","createElement","value","appendChild","mostrarRecetas","meals","recetas","h2","length","add","contenedorUl","strMeal","strMealThumb","idMeal","li","innerHTML","contenedorModal","mostrarRecetaModal","contenedor","strInstructions","screenModal","ingredientesUl","i","ingrediente","cantidad","firstChild","removeChild","tipo","mensaje","parentNode","childElementCount","p","setTimeout","remove","listadoFavoritos","JSON","parse","localStorage","getItem","setItem","stringify","nuevoFavoritos","filter","favorito","some","cargarFavoritos","arrayfavoritos"],"mappings":"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","file":"bundle.js","sourcesContent":["// VARIABLES\r\n\r\nconst resultadosContenedor = document.querySelector('.js-resultados__contenedor');\r\nconst modalContenedor = document.querySelector('.js-modal');\r\nconst contenedorMensaje = document.querySelector('.js-mensaje__contenedor');\r\n\r\nconst selectCategorias = document.querySelector('#categorias');\r\nconst subnav = document.querySelector('.js-nav__subnav');\r\n\r\n\r\n//EVENTOS\r\n\r\n\r\nselectCategorias.addEventListener('change', seleccionarCategoria);\r\n\r\n\r\nresultadosContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('js-boton')){\r\n        const id = e.target.getAttribute('id');\r\n        seleccionarReceta(id, modalContenedor);    \r\n    }\r\n})\r\n\r\n\r\nmodalContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('fa-xmark') || e.target.classList.contains('c-modal__screen')){\r\n        limpiarHTML(modalContenedor);\r\n    }\r\n    //boton de favoritos\r\n    if(e.target.classList.contains('js-boton')) {\r\n        const receta = {\r\n            id : document.querySelector('.c-modal__boton').getAttribute('data-id'),\r\n            titulo : document.querySelector('.c-modal__h2').textContent,\r\n            imagen : document.querySelector('.js-modal__img').getAttribute('src')\r\n        }\r\n        \r\n        const existe = existeFavoritos(receta.id);\r\n        if (!existe) {\r\n            agregarFavoritos(receta);\r\n            imprimirAlerta(contenedorMensaje, 'exito', 'Agregado correctamente');\r\n            e.target.textContent = 'Eliminar Favoritos';\r\n        } else {\r\n            eliminarFavoritos(receta.id);\r\n            imprimirAlerta(contenedorMensaje, 'error', 'Eliminado correctamente');\r\n            e.target.textContent = 'Agregar Favoritos';\r\n        }\r\n    }\r\n});\r\n\r\n    // evento para iniciar la app\r\ndocument.addEventListener('DOMContentLoaded', iniciarApp);\r\n\r\n","\r\nconst favoritosContenedor = document.querySelector('.js-favoritos__contenedor');\r\nconst modalContenedorFavoritos = document.querySelector('.js-modal');\r\nconst contenedorMensajeFavoritos = document.querySelector('.js-mensaje__contenedor');\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    cargarFavoritos(listadoFavoritos);\r\n\r\n})\r\nfavoritosContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('js-boton')){\r\n        const id = e.target.getAttribute('id');\r\n        seleccionarReceta(id, modalContenedorFavoritos);    \r\n    }\r\n});\r\n\r\nmodalContenedorFavoritos.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('fa-xmark') || e.target.classList.contains('c-modal__screen')){\r\n        limpiarHTML(modalContenedorFavoritos);\r\n        limpiarHTML(favoritosContenedor);\r\n        const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n        cargarFavoritos(listadoFavoritos);\r\n    }\r\n    //boton de favoritos\r\n    if(e.target.classList.contains('js-boton')) {\r\n        const receta = {\r\n            id : document.querySelector('.c-modal__boton').getAttribute('data-id'),\r\n            titulo : document.querySelector('.c-modal__h2').textContent,\r\n            imagen : document.querySelector('.js-modal__img').getAttribute('src')\r\n        }\r\n        \r\n        const existe = existeFavoritos(receta.id);\r\n        if (!existe) {\r\n            agregarFavoritos(receta);\r\n            imprimirAlerta(contenedorMensajeFavoritos, 'exito', 'Has agregado la receta a favoritos');\r\n            e.target.textContent = 'Eliminar Favoritos';\r\n        } else {\r\n            eliminarFavoritos(receta.id);\r\n            imprimirAlerta(contenedorMensajeFavoritos, 'error', 'Has eliminado la receta de favoritos');\r\n            e.target.textContent = 'Agregar Favoritos';\r\n        }\r\n    }\r\n});\r\n\r\n\r\n","// FUNCIONES\r\n//funcion para inciar la app\r\nfunction iniciarApp () {\r\n    // listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    obtenerCategorias();\r\n}\r\n\r\nfunction obtenerCategorias () {\r\n    const url = 'https://www.themealdb.com/api/json/v1/1/categories.php';\r\n    fetch (url)\r\n        .then(respuesta => respuesta.json())\r\n        .then (resultado => mostrarCategorias(resultado.categories))\r\n}\r\n\r\nfunction mostrarCategorias (categorias = []) {\r\n    categorias.forEach( categoria => {\r\n        const {strCategory} = categoria;\r\n        const option = document.createElement('OPTION');\r\n        option.value = strCategory;\r\n        option.textContent = strCategory;\r\n        selectCategorias.appendChild(option);\r\n    })\r\n}\r\n\r\nfunction seleccionarCategoria (e) {\r\n    const categoria = e.target.value;\r\n    const url = `https://www.themealdb.com/api/json/v1/1/filter.php?c=${categoria}`;\r\n    fetch (url)\r\n        .then(respuesta => respuesta.json())\r\n        .then(resultado => mostrarRecetas(resultado.meals));\r\n}\r\n\r\nfunction mostrarRecetas (recetas = []) {\r\n    limpiarHTML(resultadosContenedor);\r\n    \r\n    const h2 = document.createElement('H2');\r\n    h2.textContent = recetas.length ? 'Resultados': 'No hay resultados';\r\n    h2.classList.add('c-resultados__h2');\r\n\r\n    const contenedorUl = document.createElement('UL');\r\n    contenedorUl.classList.add('c-resultados__ul');\r\n\r\n    resultadosContenedor.appendChild(h2);\r\n    resultadosContenedor.appendChild(contenedorUl);\r\n\r\n    //iterarmos y mostramos los resultados\r\n    recetas.forEach(receta => {\r\n        const {strMeal, strMealThumb, idMeal} = receta;\r\n        const li = document.createElement('LI');\r\n        li.classList.add('c-resultados__li');\r\n        li.innerHTML = `\r\n            <div class=\"c-resultados__li-imagen\">\r\n                <img src=${strMealThumb} alt=\"imagen receta ${strMealThumb}\">\r\n            </div>\r\n            <div class=\"c-resultados__li-contenido\">\r\n                <h3 class=\"c-resultados__titulo\">${strMeal}</h3>\r\n                <button class=\"c-resultados__boton c-boton js-boton\" id=${idMeal}>Ver receta</button>\r\n            </div>\r\n        `;\r\n        contenedorUl.appendChild(li);\r\n    })\r\n}\r\n\r\nfunction seleccionarReceta (id, contenedorModal) {\r\n    const url = `https://themealdb.com/api/json/v1/1/lookup.php?i=${id}`;\r\n    fetch (url)\r\n        .then ( respuesta => respuesta.json())\r\n        .then ( resultado => mostrarRecetaModal(resultado.meals[0], contenedorModal))\r\n}\r\n\r\nfunction mostrarRecetaModal (receta, contenedor) {\r\n    const {idMeal, strInstructions, strMeal, strMealThumb} = receta;\r\n    const screenModal = document.createElement('DIV');\r\n    screenModal.classList.add('c-modal__screen');\r\n    screenModal.innerHTML = `\r\n        <div class='c-modal__contenedor'>\r\n            <h2 class='c-modal__h2'>${strMeal}</h2>\r\n            <div class='c-modal__contenedor-contenido'>\r\n                <div class='c-modal__img'>\r\n                    <img class='js-modal__img' src='${strMealThumb}' alt='imagen producto'>\r\n                </div>\r\n                <h3 class='c-modal__h3'>Instrucciones</h3>\r\n                <p class='c-modal__p'>${strInstructions}</p>\r\n                <h3 class='c-modal__h3'>Ingredientes y cantidades</h3>\r\n                <ul class='c-modal__ul js-modal__ul'>\r\n\r\n                </ul>\r\n            </div>\r\n            <button class='c-modal__boton c-boton js-boton' data-id=${idMeal}>Guardar Favoritos</button>\r\n            <div class='c-modal__close'>\r\n                <i class='fa-solid fa-xmark'></i>\r\n            </div> \r\n        </div>\r\n    `;\r\n    contenedor.appendChild(screenModal);\r\n    contenedor.classList.add('c-modal--mod');\r\n\r\n    // iteramos los ingredientes que tienen contenido y sus cantidades\r\n    const ingredientesUl = document.querySelector('.js-modal__ul');\r\n    for (let i=1; i<=20; i++) {\r\n        if (receta[`strIngredient${i}`]) {\r\n            const ingrediente = receta[`strIngredient${i}`];\r\n            const cantidad = receta[`strMeasure${i}`];\r\n\r\n            const li = document.createElement('LI');\r\n            li.classList.add('c-modal__li');\r\n            li.textContent = `${ingrediente} - ${cantidad}`;\r\n            ingredientesUl.appendChild(li);\r\n        }\r\n    }\r\n\r\n    // Comprobamos receta está en listado favoritos y cambiamos entre guardar/eliminar favoritos\r\n    const existe = existeFavoritos(idMeal);\r\n    if (existe) {\r\n        document.querySelector('.c-modal__boton').textContent = 'Eliminar Favoritos';\r\n    }\r\n}\r\n\r\nfunction limpiarHTML (contenedor) {\r\n    while (contenedor.firstChild) {\r\n        contenedor.removeChild(contenedor.firstChild)\r\n    }\r\n}\r\n\r\nfunction imprimirAlerta (contenedorMensaje, tipo, mensaje) {\r\n    contenedorMensaje.parentNode.classList.add('c-mensaje__contenedor--mod');\r\n    if(contenedorMensaje.childElementCount === 0) {\r\n        const p = document.createElement('p');\r\n        p.classList.add('u-mensaje');\r\n        p.textContent = mensaje;\r\n        if (tipo === 'exito') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        if (tipo === 'error') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        if (tipo === 'alerta') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        contenedorMensaje.appendChild(p);\r\n        \r\n        setTimeout((e) => {\r\n            limpiarHTML(contenedorMensaje);\r\n            contenedorMensaje.parentNode.classList.remove('c-mensaje__contenedor--mod');\r\n        }, 5000);\r\n    }\r\n}\r\n\r\nfunction agregarFavoritos (receta) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    localStorage.setItem('listadoFavoritos', JSON.stringify([...listadoFavoritos, receta]));\r\n}\r\nfunction eliminarFavoritos (id) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    const nuevoFavoritos = listadoFavoritos.filter( favorito => favorito.id !== id);\r\n    localStorage.setItem('listadoFavoritos', JSON.stringify(nuevoFavoritos));\r\n    \r\n}\r\nfunction existeFavoritos (id) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    return listadoFavoritos.some( favorito => favorito.id === id); \r\n}\r\n\r\nfunction cargarFavoritos (arrayfavoritos = []) {\r\n    const contenedorUl = document.createElement('UL');\r\n    contenedorUl.classList.add('c-favoritos__ul');\r\n    favoritosContenedor.appendChild(contenedorUl);\r\n    \r\n    arrayfavoritos.forEach( favorito => {\r\n        const {titulo, imagen, id} = favorito;\r\n        const li = document.createElement('LI');\r\n        li.classList.add('c-favoritos__li');\r\n        li.innerHTML = `\r\n            <div class=\"c-favoritos__li-imagen\">\r\n                <img src=${imagen} alt=\"imagen receta ${imagen}\">\r\n            </div>\r\n            <div class=\"c-favoritos__li-contenido\">\r\n                <h3 class=\"c-favoritos__titulo\">${titulo}</h3>\r\n                <button class=\"c-favoritos__boton c-boton js-boton\" id=${id}>Ver receta</button>\r\n            </div>\r\n        `;\r\n        contenedorUl.appendChild(li);\r\n    });\r\n}"]}