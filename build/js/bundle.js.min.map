{"version":3,"sources":["app.js","favoritos.js","funciones.js"],"names":["resultadosContenedor","document","querySelector","modalContenedor","contenedorMensaje","selectCategorias","subnav","addEventListener","seleccionarCategoria","e","target","classList","contains","seleccionarReceta","getAttribute","limpiarHTML","receta","id","titulo","textContent","imagen","existeFavoritos","eliminarFavoritos","imprimirAlerta","agregarFavoritos","iniciarApp","favoritosContenedor","modalContenedorFavoritos","contenedorMensajeFavoritos","listadoFavoritos","JSON","parse","localStorage","getItem","obtenerCategorias","fetch","then","respuesta","json","resultado","mostrarCategorias","categories","categorias","forEach","categoria","strCategory","option","createElement","value","appendChild","mostrarRecetas","meals","recetas","h2","length","add","contenedorUl","strMeal","strMealThumb","idMeal","li","innerHTML","contenedorModal","mostrarRecetaModal","contenedor","strInstructions","screenModal","ingredientesUl","i","ingrediente","cantidad","firstChild","removeChild","tipo","mensaje","children","childElementCount","p","setTimeout","remove","setItem","stringify","nuevoFavoritos","filter","favorito","some","cargarFavoritos","arrayfavoritos","h5"],"mappings":"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","file":"bundle.js","sourcesContent":["// VARIABLES\r\n\r\nconst resultadosContenedor = document.querySelector('.js-resultados__contenedor');\r\nconst modalContenedor = document.querySelector('.js-modal');\r\nconst contenedorMensaje = document.querySelector('.js-mensaje__contenedor');\r\n\r\nconst selectCategorias = document.querySelector('#categorias');\r\nconst subnav = document.querySelector('.js-nav__subnav');\r\n\r\n\r\n//EVENTOS\r\n\r\n\r\nselectCategorias.addEventListener('change', seleccionarCategoria);\r\n\r\n\r\nresultadosContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('js-boton')){\r\n        const id = e.target.getAttribute('id');\r\n        seleccionarReceta(id, modalContenedor);    \r\n    }\r\n})\r\n\r\n\r\nmodalContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('fa-xmark') || e.target.classList.contains('c-modal__screen')){\r\n        limpiarHTML(modalContenedor);\r\n    }\r\n    //boton de favoritos\r\n    if(e.target.classList.contains('js-boton')) {\r\n        const receta = {\r\n            id : document.querySelector('.c-modal__boton').getAttribute('data-id'),\r\n            titulo : document.querySelector('.c-modal__h2').textContent,\r\n            imagen : document.querySelector('.js-modal__img').getAttribute('src')\r\n        }\r\n        \r\n        const existe = existeFavoritos(receta.id);\r\n        if (!existe) {\r\n            agregarFavoritos(receta);\r\n            imprimirAlerta(contenedorMensaje, 'exito', 'Agregado correctamente');\r\n            e.target.textContent = 'Eliminar Favoritos';\r\n        } else {\r\n            eliminarFavoritos(receta.id);\r\n            imprimirAlerta(contenedorMensaje, 'error', 'Eliminado correctamente');\r\n            e.target.textContent = 'Agregar Favoritos';\r\n        }\r\n    }\r\n});\r\n\r\n    // evento para iniciar la app\r\ndocument.addEventListener('DOMContentLoaded', iniciarApp);\r\n\r\n","\r\nconst favoritosContenedor = document.querySelector('.js-favoritos__contenedor');\r\nconst modalContenedorFavoritos = document.querySelector('.js-modal');\r\nconst contenedorMensajeFavoritos = document.querySelector('.js-mensaje__contenedor');\r\nconst listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    cargarFavoritos(listadoFavoritos);\r\n})\r\n\r\nfavoritosContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('js-boton')){\r\n        const id = e.target.getAttribute('id');\r\n        seleccionarReceta(id, modalContenedorFavoritos);    \r\n    }\r\n});\r\n\r\nmodalContenedorFavoritos.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('fa-xmark') || e.target.classList.contains('c-modal__screen')){\r\n        limpiarHTML(modalContenedorFavoritos);\r\n        limpiarHTML(favoritosContenedor);\r\n        const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n        cargarFavoritos(listadoFavoritos);\r\n    }\r\n    //boton de favoritos\r\n    if(e.target.classList.contains('js-boton')) {\r\n        const receta = {\r\n            id : document.querySelector('.c-modal__boton').getAttribute('data-id'),\r\n            titulo : document.querySelector('.c-modal__h2').textContent,\r\n            imagen : document.querySelector('.js-modal__img').getAttribute('src')\r\n        }\r\n        \r\n        const existe = existeFavoritos(receta.id);\r\n        if (!existe) {\r\n            agregarFavoritos(receta);\r\n            imprimirAlerta(contenedorMensajeFavoritos, 'exito', 'Has agregado la receta a favoritos');\r\n            e.target.textContent = 'Eliminar Favoritos';\r\n        } else {\r\n            eliminarFavoritos(receta.id);\r\n            imprimirAlerta(contenedorMensajeFavoritos, 'error', 'Has eliminado la receta de favoritos');\r\n            e.target.textContent = 'Agregar Favoritos';\r\n        }\r\n    }\r\n});\r\n\r\n\r\n","// FUNCIONES\r\n//funcion para inciar la app\r\nfunction iniciarApp () {\r\n    obtenerCategorias();\r\n}\r\n\r\nfunction obtenerCategorias () {\r\n    const url = 'https://www.themealdb.com/api/json/v1/1/categories.php';\r\n    fetch (url)\r\n        .then(respuesta => respuesta.json())\r\n        .then (resultado => mostrarCategorias(resultado.categories))\r\n}\r\n\r\nfunction mostrarCategorias (categorias = []) {\r\n    categorias.forEach( categoria => {\r\n        const {strCategory} = categoria;\r\n        const option = document.createElement('OPTION');\r\n        option.value = strCategory;\r\n        option.textContent = strCategory;\r\n        selectCategorias.appendChild(option);\r\n    })\r\n}\r\n\r\nfunction seleccionarCategoria (e) {\r\n    const categoria = e.target.value;\r\n    const url = `https://www.themealdb.com/api/json/v1/1/filter.php?c=${categoria}`;\r\n    fetch (url)\r\n        .then(respuesta => respuesta.json())\r\n        .then(resultado => mostrarRecetas(resultado.meals));\r\n}\r\n\r\nfunction mostrarRecetas (recetas = []) {\r\n    limpiarHTML(resultadosContenedor);\r\n    \r\n    const h2 = document.createElement('H2');\r\n    h2.textContent = recetas.length ? 'Resultados': 'No hay resultados';\r\n    h2.classList.add('c-resultados__h2');\r\n\r\n    const contenedorUl = document.createElement('UL');\r\n    contenedorUl.classList.add('c-resultados__ul');\r\n\r\n    resultadosContenedor.appendChild(h2);\r\n    resultadosContenedor.appendChild(contenedorUl);\r\n\r\n    //iterarmos y mostramos los resultados\r\n    recetas.forEach(receta => {\r\n        const {strMeal, strMealThumb, idMeal} = receta;\r\n        const li = document.createElement('LI');\r\n        li.classList.add('c-resultados__li');\r\n        li.innerHTML = `\r\n            <div class=\"c-resultados__li-imagen\">\r\n                <img src=${strMealThumb} alt=\"imagen receta ${strMealThumb}\">\r\n            </div>\r\n            <div class=\"c-resultados__li-contenido\">\r\n                <h3 class=\"c-resultados__titulo\">${strMeal}</h3>\r\n                <button class=\"c-resultados__boton c-boton js-boton\" id=${idMeal}>Ver receta</button>\r\n            </div>\r\n        `;\r\n        contenedorUl.appendChild(li);\r\n    })\r\n}\r\n\r\nfunction seleccionarReceta (id, contenedorModal) {\r\n    const url = `https://themealdb.com/api/json/v1/1/lookup.php?i=${id}`;\r\n    fetch (url)\r\n        .then ( respuesta => respuesta.json())\r\n        .then ( resultado => mostrarRecetaModal(resultado.meals[0], contenedorModal))\r\n}\r\n\r\nfunction mostrarRecetaModal (receta, contenedor) {\r\n    const {idMeal, strInstructions, strMeal, strMealThumb} = receta;\r\n    const screenModal = document.createElement('DIV');\r\n    screenModal.classList.add('c-modal__screen');\r\n    screenModal.innerHTML = `\r\n        <div class='c-modal__contenedor'>\r\n            <h2 class='c-modal__h2'>${strMeal}</h2>\r\n            <div class='c-modal__contenedor-contenido'>\r\n                <div class='c-modal__img'>\r\n                    <img class='js-modal__img' src='${strMealThumb}' alt='imagen producto'>\r\n                </div>\r\n                <h3 class='c-modal__h3'>Instrucciones</h3>\r\n                <p class='c-modal__p'>${strInstructions}</p>\r\n                <h3 class='c-modal__h3'>Ingredientes y cantidades</h3>\r\n                <ul class='c-modal__ul js-modal__ul'>\r\n\r\n                </ul>\r\n            </div>\r\n            <button class='c-modal__boton c-boton js-boton' data-id=${idMeal}>Guardar Favoritos</button>\r\n            <div class='c-modal__close'>\r\n                <i class='fa-solid fa-xmark'></i>\r\n            </div> \r\n        </div>\r\n    `;\r\n    contenedor.appendChild(screenModal);\r\n    contenedor.classList.add('c-modal--mod');\r\n\r\n    // iteramos los ingredientes que tienen contenido y sus cantidades\r\n    const ingredientesUl = document.querySelector('.js-modal__ul');\r\n    for (let i=1; i<=20; i++) {\r\n        if (receta[`strIngredient${i}`]) {\r\n            const ingrediente = receta[`strIngredient${i}`];\r\n            const cantidad = receta[`strMeasure${i}`];\r\n\r\n            const li = document.createElement('LI');\r\n            li.classList.add('c-modal__li');\r\n            li.textContent = `${ingrediente} - ${cantidad}`;\r\n            ingredientesUl.appendChild(li);\r\n        }\r\n    }\r\n\r\n    // Comprobamos receta está en listado favoritos y cambiamos entre guardar/eliminar favoritos\r\n    const existe = existeFavoritos(idMeal);\r\n    if (existe) {\r\n        document.querySelector('.c-modal__boton').textContent = 'Eliminar Favoritos';\r\n    }\r\n}\r\n\r\nfunction limpiarHTML (contenedor) {\r\n    while (contenedor.firstChild) {\r\n        contenedor.removeChild(contenedor.firstChild)\r\n    }\r\n}\r\n\r\nfunction imprimirAlerta (contenedorMensaje, tipo, mensaje) {\r\n    contenedorMensaje.classList.add('c-mensaje__contenedor--mod');\r\n    if(contenedorMensaje.children[1].childElementCount === 0) {\r\n        const p = document.createElement('P');\r\n        p.classList.add('c-mensaje__p-creada', 'u-mensaje');\r\n        p.textContent = mensaje;\r\n        if (tipo === 'exito') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        if (tipo === 'error') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        if (tipo === 'alerta') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        contenedorMensaje.children[1].appendChild(p);\r\n        \r\n        setTimeout((e) => {\r\n            contenedorMensaje.classList.remove('c-mensaje__contenedor--mod');\r\n        }, 4000);\r\n        setTimeout((e) => {\r\n            limpiarHTML(contenedorMensaje.children[1]);\r\n        }, 5000);\r\n    }\r\n}\r\n\r\nfunction agregarFavoritos (receta) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    localStorage.setItem('listadoFavoritos', JSON.stringify([...listadoFavoritos, receta]));\r\n}\r\nfunction eliminarFavoritos (id) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    const nuevoFavoritos = listadoFavoritos.filter( favorito => favorito.id !== id);\r\n    localStorage.setItem('listadoFavoritos', JSON.stringify(nuevoFavoritos));\r\n    \r\n}\r\nfunction existeFavoritos (id) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    return listadoFavoritos.some( favorito => favorito.id === id); \r\n}\r\n\r\nfunction cargarFavoritos (arrayfavoritos = []) {\r\n    if (arrayfavoritos.length == 0) {\r\n        const h5 = document.createElement('H5');\r\n        h5.classList.add('c-favoritos__h5');\r\n        h5.textContent = `¡Aún no has añadido nada a favoritos!`;\r\n        favoritosContenedor.appendChild(h5);\r\n    } else {\r\n        const contenedorUl = document.createElement('UL');\r\n        contenedorUl.classList.add('c-favoritos__ul');\r\n        favoritosContenedor.appendChild(contenedorUl);\r\n        arrayfavoritos.forEach( favorito => {\r\n            const {titulo, imagen, id} = favorito;\r\n            const li = document.createElement('LI');\r\n            li.classList.add('c-favoritos__li');\r\n            li.innerHTML = `\r\n                <div class=\"c-favoritos__li-imagen\">\r\n                    <img src=${imagen} alt=\"imagen receta ${imagen}\">\r\n                </div>\r\n                <div class=\"c-favoritos__li-contenido\">\r\n                    <h3 class=\"c-favoritos__titulo\">${titulo}</h3>\r\n                    <button class=\"c-favoritos__boton c-boton js-boton\" id=${id}>Ver receta</button>\r\n                </div>\r\n            `;\r\n            contenedorUl.appendChild(li);\r\n        });\r\n    }\r\n}"]}