{"version":3,"sources":["app.js","favoritos.js","funciones.js"],"names":["resultadosContenedor","document","querySelector","modalContenedor","contenedorMensaje","selectCategorias","subnav","addEventListener","iniciarApp","error","console","log","seleccionarCategoria","e","target","classList","contains","seleccionarReceta","getAttribute","limpiarHTML","receta","id","titulo","textContent","imagen","existeFavoritos","eliminarFavoritos","imprimirAlerta","agregarFavoritos","favoritosContenedor","modalContenedorFavoritos","contenedorMensajeFavoritos","listadoFavoritos","JSON","parse","localStorage","getItem","obtenerCategorias","fetch","then","respuesta","json","resultado","mostrarCategorias","categories","categorias","forEach","categoria","strCategory","option","createElement","value","appendChild","mostrarRecetas","meals","recetas","h2","length","add","contenedorUl","strMeal","strMealThumb","idMeal","li","innerHTML","contenedorModal","mostrarRecetaModal","contenedor","strInstructions","screenModal","ingredientesUl","i","ingrediente","cantidad","firstChild","removeChild","tipo","mensaje","children","childElementCount","p","setTimeout","remove","setItem","stringify","nuevoFavoritos","filter","favorito","some","cargarFavoritos","arrayfavoritos","h5"],"mappings":"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","file":"bundle.js","sourcesContent":["// VARIABLES\r\n\r\nconst resultadosContenedor = document.querySelector('.js-resultados__contenedor');\r\nconst modalContenedor = document.querySelector('.js-modal');\r\nconst contenedorMensaje = document.querySelector('.js-mensaje__contenedor');\r\n\r\nconst selectCategorias = document.querySelector('#categorias');\r\nconst subnav = document.querySelector('.js-nav__subnav');\r\n\r\n\r\n//EVENTOS\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    try {\r\n        iniciarApp();\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n});\r\n\r\nselectCategorias.addEventListener('change', seleccionarCategoria);\r\n\r\n\r\nresultadosContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('js-boton')){\r\n        const id = e.target.getAttribute('id');\r\n        seleccionarReceta(id, modalContenedor);    \r\n    }\r\n})\r\n\r\n\r\nmodalContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('fa-xmark') || e.target.classList.contains('c-modal__screen')){\r\n        limpiarHTML(modalContenedor);\r\n    }\r\n    //boton de favoritos\r\n    if(e.target.classList.contains('js-boton')) {\r\n        const receta = {\r\n            id : document.querySelector('.c-modal__boton').getAttribute('data-id'),\r\n            titulo : document.querySelector('.c-modal__h2').textContent,\r\n            imagen : document.querySelector('.js-modal__img').getAttribute('src')\r\n        }\r\n        \r\n        const existe = existeFavoritos(receta.id);\r\n        if (!existe) {\r\n            agregarFavoritos(receta);\r\n            imprimirAlerta(contenedorMensaje, 'exito', 'Agregado correctamente');\r\n            e.target.textContent = 'Eliminar Favoritos';\r\n        } else {\r\n            eliminarFavoritos(receta.id);\r\n            imprimirAlerta(contenedorMensaje, 'error', 'Eliminado correctamente');\r\n            e.target.textContent = 'Agregar Favoritos';\r\n        }\r\n    }\r\n});\r\n\r\n    // evento para iniciar la app\r\n\r\n\r\n","\r\nconst favoritosContenedor = document.querySelector('.js-favoritos__contenedor');\r\nconst modalContenedorFavoritos = document.querySelector('.js-modal');\r\nconst contenedorMensajeFavoritos = document.querySelector('.js-mensaje__contenedor');\r\nconst listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    try {\r\n        const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n        cargarFavoritos(listadoFavoritos);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n})\r\n\r\nfavoritosContenedor.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('js-boton')){\r\n        const id = e.target.getAttribute('id');\r\n        seleccionarReceta(id, modalContenedorFavoritos);    \r\n    }\r\n});\r\n\r\nmodalContenedorFavoritos.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('fa-xmark') || e.target.classList.contains('c-modal__screen')){\r\n        limpiarHTML(modalContenedorFavoritos);\r\n        limpiarHTML(favoritosContenedor);\r\n        const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n        cargarFavoritos(listadoFavoritos);\r\n    }\r\n    //boton de favoritos\r\n    if(e.target.classList.contains('js-boton')) {\r\n        const receta = {\r\n            id : document.querySelector('.c-modal__boton').getAttribute('data-id'),\r\n            titulo : document.querySelector('.c-modal__h2').textContent,\r\n            imagen : document.querySelector('.js-modal__img').getAttribute('src')\r\n        }\r\n        \r\n        const existe = existeFavoritos(receta.id);\r\n        if (!existe) {\r\n            agregarFavoritos(receta);\r\n            imprimirAlerta(contenedorMensajeFavoritos, 'exito', 'Has agregado la receta a favoritos');\r\n            e.target.textContent = 'Eliminar Favoritos';\r\n        } else {\r\n            eliminarFavoritos(receta.id);\r\n            imprimirAlerta(contenedorMensajeFavoritos, 'error', 'Has eliminado la receta de favoritos');\r\n            e.target.textContent = 'Agregar Favoritos';\r\n        }\r\n    }\r\n});","// FUNCIONES\r\n//funcion para inciar la app\r\nfunction iniciarApp () {\r\n    obtenerCategorias();\r\n}\r\n\r\nfunction obtenerCategorias () {\r\n    const url = 'https://www.themealdb.com/api/json/v1/1/categories.php';\r\n    fetch (url)\r\n        .then(respuesta => respuesta.json())\r\n        .then (resultado => mostrarCategorias(resultado.categories))\r\n}\r\n\r\nfunction mostrarCategorias (categorias = []) {\r\n    categorias.forEach( categoria => {\r\n        const {strCategory} = categoria;\r\n        const option = document.createElement('OPTION');\r\n        option.value = strCategory;\r\n        option.textContent = strCategory;\r\n        selectCategorias.appendChild(option);\r\n    })\r\n}\r\n\r\nfunction seleccionarCategoria (e) {\r\n    const categoria = e.target.value;\r\n    const url = `https://www.themealdb.com/api/json/v1/1/filter.php?c=${categoria}`;\r\n    fetch (url)\r\n        .then(respuesta => respuesta.json())\r\n        .then(resultado => mostrarRecetas(resultado.meals));\r\n}\r\n\r\nfunction mostrarRecetas (recetas = []) {\r\n    limpiarHTML(resultadosContenedor);\r\n    \r\n    const h2 = document.createElement('H2');\r\n    h2.textContent = recetas.length ? 'Resultados': 'No hay resultados';\r\n    h2.classList.add('c-resultados__h2');\r\n\r\n    const contenedorUl = document.createElement('UL');\r\n    contenedorUl.classList.add('c-resultados__ul');\r\n\r\n    resultadosContenedor.appendChild(h2);\r\n    resultadosContenedor.appendChild(contenedorUl);\r\n\r\n    //iterarmos y mostramos los resultados\r\n    recetas.forEach(receta => {\r\n        const {strMeal, strMealThumb, idMeal} = receta;\r\n        const li = document.createElement('LI');\r\n        li.classList.add('c-resultados__li');\r\n        li.innerHTML = `\r\n            <div class=\"c-resultados__li-imagen\">\r\n                <img src=${strMealThumb} alt=\"imagen receta ${strMealThumb}\">\r\n            </div>\r\n            <div class=\"c-resultados__li-contenido\">\r\n                <h3 class=\"c-resultados__titulo\">${strMeal}</h3>\r\n                <button class=\"c-resultados__boton c-boton js-boton\" id=${idMeal}>Ver receta</button>\r\n            </div>\r\n        `;\r\n        contenedorUl.appendChild(li);\r\n    })\r\n}\r\n\r\nfunction seleccionarReceta (id, contenedorModal) {\r\n    const url = `https://themealdb.com/api/json/v1/1/lookup.php?i=${id}`;\r\n    fetch (url)\r\n        .then ( respuesta => respuesta.json())\r\n        .then ( resultado => mostrarRecetaModal(resultado.meals[0], contenedorModal))\r\n}\r\n\r\nfunction mostrarRecetaModal (receta, contenedor) {\r\n    const {idMeal, strInstructions, strMeal, strMealThumb} = receta;\r\n    const screenModal = document.createElement('DIV');\r\n    screenModal.classList.add('c-modal__screen');\r\n    screenModal.innerHTML = `\r\n        <div class='c-modal__contenedor'>\r\n            <h2 class='c-modal__h2'>${strMeal}</h2>\r\n            <div class='c-modal__contenedor-contenido'>\r\n                <div class='c-modal__img'>\r\n                    <img class='js-modal__img' src='${strMealThumb}' alt='imagen producto'>\r\n                </div>\r\n                <h3 class='c-modal__h3'>Instrucciones</h3>\r\n                <p class='c-modal__p'>${strInstructions}</p>\r\n                <h3 class='c-modal__h3'>Ingredientes y cantidades</h3>\r\n                <ul class='c-modal__ul js-modal__ul'>\r\n\r\n                </ul>\r\n            </div>\r\n            <button class='c-modal__boton c-boton js-boton' data-id=${idMeal}>Guardar Favoritos</button>\r\n            <div class='c-modal__close'>\r\n                <i class='fa-solid fa-xmark'></i>\r\n            </div> \r\n        </div>\r\n    `;\r\n    contenedor.appendChild(screenModal);\r\n    contenedor.classList.add('c-modal--mod');\r\n\r\n    // iteramos los ingredientes que tienen contenido y sus cantidades\r\n    const ingredientesUl = document.querySelector('.js-modal__ul');\r\n    for (let i=1; i<=20; i++) {\r\n        if (receta[`strIngredient${i}`]) {\r\n            const ingrediente = receta[`strIngredient${i}`];\r\n            const cantidad = receta[`strMeasure${i}`];\r\n\r\n            const li = document.createElement('LI');\r\n            li.classList.add('c-modal__li');\r\n            li.textContent = `${ingrediente} - ${cantidad}`;\r\n            ingredientesUl.appendChild(li);\r\n        }\r\n    }\r\n\r\n    // Comprobamos receta está en listado favoritos y cambiamos entre guardar/eliminar favoritos\r\n    const existe = existeFavoritos(idMeal);\r\n    if (existe) {\r\n        document.querySelector('.c-modal__boton').textContent = 'Eliminar Favoritos';\r\n    }\r\n}\r\n\r\nfunction limpiarHTML (contenedor) {\r\n    while (contenedor.firstChild) {\r\n        contenedor.removeChild(contenedor.firstChild)\r\n    }\r\n}\r\n\r\nfunction imprimirAlerta (contenedorMensaje, tipo, mensaje) {\r\n    contenedorMensaje.classList.add('c-mensaje__contenedor--mod');\r\n    if(contenedorMensaje.children[1].childElementCount === 0) {\r\n        const p = document.createElement('P');\r\n        p.classList.add('c-mensaje__p-creada', 'u-mensaje');\r\n        p.textContent = mensaje;\r\n        if (tipo === 'exito') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        if (tipo === 'error') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        if (tipo === 'alerta') {\r\n            p.classList.add(`u-mensaje--${tipo}`);\r\n        }\r\n        contenedorMensaje.children[1].appendChild(p);\r\n        \r\n        setTimeout((e) => {\r\n            contenedorMensaje.classList.remove('c-mensaje__contenedor--mod');\r\n        }, 4000);\r\n        setTimeout((e) => {\r\n            limpiarHTML(contenedorMensaje.children[1]);\r\n        }, 5000);\r\n    }\r\n}\r\n\r\nfunction agregarFavoritos (receta) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    localStorage.setItem('listadoFavoritos', JSON.stringify([...listadoFavoritos, receta]));\r\n}\r\nfunction eliminarFavoritos (id) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    const nuevoFavoritos = listadoFavoritos.filter( favorito => favorito.id !== id);\r\n    localStorage.setItem('listadoFavoritos', JSON.stringify(nuevoFavoritos));\r\n    \r\n}\r\nfunction existeFavoritos (id) {\r\n    const listadoFavoritos = JSON.parse(localStorage.getItem('listadoFavoritos')) || [];\r\n    return listadoFavoritos.some( favorito => favorito.id === id); \r\n}\r\n\r\nfunction cargarFavoritos (arrayfavoritos = []) {\r\n    if (arrayfavoritos.length == 0) {\r\n        const h5 = document.createElement('H5');\r\n        h5.classList.add('c-favoritos__h5');\r\n        h5.textContent = `¡Aún no has añadido nada a favoritos!`;\r\n        favoritosContenedor.appendChild(h5);\r\n    } else {\r\n        const contenedorUl = document.createElement('UL');\r\n        contenedorUl.classList.add('c-favoritos__ul');\r\n        favoritosContenedor.appendChild(contenedorUl);\r\n        arrayfavoritos.forEach( favorito => {\r\n            const {titulo, imagen, id} = favorito;\r\n            const li = document.createElement('LI');\r\n            li.classList.add('c-favoritos__li');\r\n            li.innerHTML = `\r\n                <div class=\"c-favoritos__li-imagen\">\r\n                    <img src=${imagen} alt=\"imagen receta ${imagen}\">\r\n                </div>\r\n                <div class=\"c-favoritos__li-contenido\">\r\n                    <h3 class=\"c-favoritos__titulo\">${titulo}</h3>\r\n                    <button class=\"c-favoritos__boton c-boton js-boton\" id=${id}>Ver receta</button>\r\n                </div>\r\n            `;\r\n            contenedorUl.appendChild(li);\r\n        });\r\n    }\r\n}"]}